!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Carousel=e()}("undefined"!=typeof self?self:this,function(){"use strict";var a={CAROUSEL_WRAP:"#carouselWrap",CAROUSEL_DOTS:"#carouselDots",ARROW_LEFT:"#arrowLeft",ARROW_RIGHT:"#arrowRight"},e="carousel-wrap",i="carousel-image",n="carousel-buttons-wrap",u="carousel-buttons",l="carousel-button",s="carousel-button on",r="carousel-arrow arrow-left",o="carousel-arrow arrow-right";function c(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent?t.attachEvent("on"+e,s):t["on"+e]=s}!function(){for(var o=0,t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var s=(new Date).getTime(),r=Math.max(0,16.7-(s-o)),i=window.setTimeout(function(){t(s+r)},r);return o=s+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var t=function(t,e){var s=this;!function(t,e,s){for(var r in e)!e.hasOwnProperty(r)||t.hasOwnProperty(r)&&!s||(t[r]=e[r])}(this.carouselOptions,e,!0),s.carousel=document.querySelector(t),s.carousel.appendChild(s.getImgs()),s.carouselWrap=document.querySelector(a.CAROUSEL_WRAP);var r=setInterval(function(){s.isCarouselComplete()&&(clearInterval(r),s.initCarousel(),s.initDots(),s.initArrows())},50)};return t.prototype={carouselOptions:{showCarouselArrow:!0,showCarouselDot:!0,carouselInterval:3e3,carouselAnimateTime:150,carouselAnimateInterval:10},isCarouselComplete:function(){for(var t=0,e=0;e<this.carouselWrap.children.length;e++)this.carouselWrap.children[e].complete&&t++;return t===this.carouselWrap.children.length},initCarousel:function(t,e){this.carouselCount=this.carouselWrap.children.length,this.setCarousel(),this.carouselIndex=1,this.carouselIntervalr=null,this.carouselAnimateSpeed=this.carouselWidth/(this.carouselOptions.carouselAnimateTime/this.carouselOptions.carouselAnimateInterval),this.isCarouselAnimate=!1,this.isDotClick=!1,this.bindCarousel(),this.playCarousel()},setCarousel:function(){var t=this.carouselWrap.children[0].cloneNode(!0),e=this.carouselWrap.children[this.carouselCount-1].cloneNode(!0);this.carouselWrap.insertBefore(e,this.carouselWrap.children[0]),this.carouselWrap.appendChild(t),this.setWidth(this.carousel,this.carouselOptions.carouselWidth),this.setHeight(this.carousel,this.carouselOptions.carouselHeight),this.carouselWidth=this.getWidth(this.carousel),this.setLeft(this.carouselWrap,-this.carouselWidth),this.setWidth(this.carouselWrap,this.carouselWidth*this.carouselWrap.children.length)},setWidth:function(t,e){t.style.width=e+"px"},setHeight:function(t,e){t.style.height=e+"px"},getWidth:function(t){return parseInt(t.style.width)},setLeft:function(t,e){t.style.left=e+"px"},getLeft:function(t){return parseInt(t.style.left)},getImgs:function(){var t=document.createElement("div");t.setAttribute("class",e),t.setAttribute("id",a.CAROUSEL_WRAP.substring(1,a.CAROUSEL_WRAP.length));var s=document.createDocumentFragment(),r=document.createElement("img");return this.carouselOptions.carouselImages.forEach(function(t,e){(r=r.cloneNode(!1)).setAttribute("class",i),r.setAttribute("src",t),r.setAttribute("alt",e+1),s.appendChild(r)}),t.appendChild(s),t},initArrows:function(){this.carouselOptions.showCarouselArrow&&(this.carousel.appendChild(this.getArrows()),this.arrowLeft=document.querySelector(a.ARROW_LEFT),this.arrowRight=document.querySelector(a.ARROW_RIGHT),this.bindArrows())},getArrows:function(){var t=document.createDocumentFragment(),e=document.createElement("a"),s=document.createElement("a");return e.setAttribute("href","javascript:;"),e.setAttribute("class",r),e.setAttribute("id",a.ARROW_LEFT.substring(1,a.ARROW_LEFT.length)),e.innerHTML="&lt;",s.setAttribute("href","javascript:;"),s.setAttribute("class",o),s.setAttribute("id",a.ARROW_RIGHT.substring(1,a.ARROW_RIGHT.length)),s.innerHTML="&gt;",t.appendChild(e),t.appendChild(s),t},initDots:function(){this.carouselOptions.showCarouselDot&&(this.carousel.appendChild(this.getDots()),this.carouselDots=document.querySelector(a.CAROUSEL_DOTS),this.setDot(),this.bindDots())},getDots:function(){var t=document.createElement("div");t.setAttribute("class",n);var e=document.createElement("div");e.setAttribute("class",u),e.setAttribute("id",a.CAROUSEL_DOTS.substring(1,a.CAROUSEL_DOTS.length));for(var s=document.createDocumentFragment(),r=document.createElement("span"),i=0,o=this.carouselCount;i<o;i++)(r=r.cloneNode(!1)).setAttribute("class",l),s.appendChild(r);return e.appendChild(s),t.appendChild(e),t},bindDots:function(){for(var s=this,t=0,e=this.carouselDots.children.length;t<e;t++)!function(e){c(s.carouselDots.children[e],"click",function(t){s.dotIndex=e+1,s.isCarouselAnimate||s.carouselIndex===s.dotIndex||(s.isDotClick=!0,s.moveDot())})}(t)},moveDot:function(){this.changeCarousel(),this.carouselIndex=this.dotIndex,this.setDot()},changeCarousel:function(){this.currentNode=this.carouselWrap.children[this.carouselIndex];var t=this.carouselWrap.children[this.dotIndex];if(this.carouselIndex<this.dotIndex){var e=this.currentNode.nextElementSibling;this.carouselWrap.insertBefore(t.cloneNode(!0),e),this.moveCarousel(this.getLeft(this.carouselWrap)-this.carouselWidth,-this.carouselAnimateSpeed)}this.carouselIndex>this.dotIndex&&(this.carouselWrap.insertBefore(t.cloneNode(!0),this.currentNode),this.setLeft(this.carouselWrap,-(this.carouselIndex+1)*this.carouselWidth),this.moveCarousel(this.getLeft(this.carouselWrap)+this.carouselWidth,this.carouselAnimateSpeed))},setDot:function(){for(var t=0,e=this.carouselDots.children.length;t<e;t++)this.carouselDots.children[t].setAttribute("class",l);this.carouselDots.children[this.carouselIndex-1].setAttribute("class",s)},playCarousel:function(){var t=this;this.carouselIntervalr=window.setInterval(function(){t.nextCarousel()},this.carouselOptions.carouselInterval)},bindCarousel:function(){var e=this;c(this.carousel,"mouseenter",function(t){clearInterval(e.carouselIntervalr)}),c(this.carousel,"mouseleave",function(t){e.playCarousel()})},bindArrows:function(){var e=this;c(this.arrowLeft,"click",function(t){e.prevCarousel()}),c(this.arrowRight,"click",function(t){e.nextCarousel()})},isFirstCarousel:function(){return 0===this.getLeft(this.carouselWrap)},isLastCarousel:function(){var t=this.carouselWidth-this.getWidth(this.carouselWrap);return this.getLeft(this.carouselWrap)===t},prevCarousel:function(){this.isCarouselAnimate||(this.carouselIndex--,this.carouselIndex<1&&(this.carouselIndex=this.carouselCount),this.moveCarousel(this.getLeft(this.carouselWrap)+this.carouselWidth,this.carouselAnimateSpeed),this.carouselOptions.showCarouselDot&&this.setDot())},nextCarousel:function(){this.isCarouselAnimate||(this.carouselIndex++,this.carouselIndex>this.carouselCount&&(this.carouselIndex=1),this.moveCarousel(this.getLeft(this.carouselWrap)-this.carouselWidth,-this.carouselAnimateSpeed),this.carouselOptions.showCarouselDot&&this.setDot())},moveCarousel:function(e,s){var r=this;r.isCarouselAnimate=!0;var i=window.requestAnimationFrame(function t(){0<s&&r.getLeft(r.carouselWrap)<e||s<0&&r.getLeft(r.carouselWrap)>e?(r.setLeft(r.carouselWrap,r.getLeft(r.carouselWrap)+s),i=window.requestAnimationFrame(t)):(window.cancelAnimationFrame(i),r.resetCarousel(e,s))})},resetCarousel:function(t,e){this.isDotClick?this.resetMoveDot(e):this.resetMoveCarousel(t),this.isDotClick=!1,this.isCarouselAnimate=!1},resetMoveDot:function(t){this.setLeft(this.carouselWrap,-this.dotIndex*this.carouselWidth),t<0?this.carouselWrap.removeChild(this.currentNode.nextElementSibling):this.carouselWrap.removeChild(this.currentNode.previousElementSibling)},resetMoveCarousel:function(t){this.setLeft(this.carouselWrap,t),t>-this.carouselWidth&&this.setLeft(this.carouselWrap,-this.carouselCount*this.carouselWidth),t<-this.carouselWidth*this.carouselCount&&this.setLeft(this.carouselWrap,-this.carouselWidth)},constructor:t},t});